## 브라우저 동작 방식

- URL을 입력합니다.
- 해당 도메인 서버를 찾아 갑니다.
- DNS가 실제 서버가 있는 곳을 연결해 줍니다.
- 클라이언트는 HTTP/HTTPS 통신을 통한 데이터를 서버로 부터 받습니다.
- DOM Tree 및 CSSOM Tree가 결합되어 Render Tree를 형성합니다.
- Render Tree에는 페이지를 렌더링하는 데 필요한 노드만 포함됩니다.
- 레이아웃은 각 노드의 정확한 위치와 크기를 계산합니다.
- 최종 렌더링 트리를 가져와 픽셀로 변환한후 화면에 렌더링합니다.

### 브라우저란?

웹 브라우저 또는 브라우저는 웹에서 페이지를 찾아서 보여주고, 사용자가 하이퍼링크를 통해 다른 페이지로 이동할 수 있도록 하는 프로그램입니다.

우리가 인터넷에 접속할 때 사용하는 **Chrome, Firefox, Safari, Opera, Brave, Edge**가 있습니다. (Internet Explorer는 서비스를 중단하여 제외)

브라우저의 중요한 기능은 사용자에게 찾아서 보여준다는 것입니다.

브라우저는 사용자가 원하는 데이터를 서버로 부터 찾아와서 보여줍니다.

데이터는 페이지외에도 글, 이미지, 비디오등의 컨텐츠들도 포함됩니다.

> 웹에 연결된 컴퓨터는 클라이언트와 서버입니다.
>
> **클라이언트**
>
> 일반적인 웹 사용자의 인터넷이 연결된 컴퓨터와 컴퓨터에서 웹에 접근하는 소프트웨어(브라우저)입니다.
>
> **서버**
>
> 웹페이지, 사이트, 또는 앱을 저장하는 컴퓨터입니다. 클라이언트가 웹페이지에 접근하길 원할 때, 서버로부터 클라이언트에게 보여지기 위한 웹페이지의 사본이 다운로드됩니다.

### 사용자가 브라우저에 웹 주소(URL)를 입력했을 때

### 1. Network

- 브라우저는 DNS 서버로 가서 웹사이트가 있는 서버의 진짜 주소(IP 주소)를 찾습니다.

- 브라우저는 서버에게 웹사이트의 사본을 클라이언트에게 보내달라는 HTTP 요청 메세지를 서버로 전송합니다.

- HTTP 요청에 따른 메세지와 클라이언트와 서버 사이에 전송된 모든 데이터는 TCP/IP 연결을 통해서 전송됩니다.

- 메세지를 받은 서버는 클라이언트의 요청을 승인하고 클라이언트에게 응답을 전송합니다.

- 서버는 웹사이트의 파일들을 데이터 패킷이라 불리는 작은 덩어리들로 브라우저에게 전송하기 시작합니다.

- 브라우저는 데이터 패킷(작은 덩어리)들을 받아서 조립하여 렌더링합니다.

### 2. Rendering

### 2-1. Parsing

- 클라이언트는 서버로 부터 받은 텍스트로 이루어진 HTML 파일을 파싱하여 DOM Tree와 CSSOM Tree를 만들어갑니다.

- link 태그를 만나 CSS 요청이 발생하면, 요청과 응답 과정을 거쳐 CSS파일을 파싱합니다.

- CSS 파싱이 끝나면 중단 된 HTML 파일을 다시 읽고 DOM Tree를 완성합니다.

### 2-2. Style

- 완성된 DOM 트리와 CSSOM 트리를 합쳐서 Render Tree를 렌더링합니다.
- Rendering Tree에는 페이지를 렌더링하는 데 필요한 노드만 포함됩니다.

### 2-3. Layout

- Render Tree를 화면에 어떻게 배치해야 할 것인지 노드의 정확한 위치와 크기를 계산합니다.

### 2-4 Paint

- Layout 단계에서 계산된 값을 이용해 Render Tree의 각 노드를 화면상의 실제 픽셀로 변환합니다.

### 2-5 Composite

- Paint 단계에서 생성된 레이어를 합성하여 실제 화면에 나타냅니다.

### Reference

- https://developer.mozilla.org/ko/docs/Learn/Getting_started_with_the_web/How_the_Web_works
- https://velog.io/@younoah/browser-rendering-path
- https://tecoble.techcourse.co.kr/post/2021-10-24-browser-rendering/
