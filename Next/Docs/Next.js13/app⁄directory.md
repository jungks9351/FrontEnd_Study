## Next.js 13 app/directory

### 클라이언트 JS의 수를 줄이기 위해

랜더링 시 JS수의 수가 줄어든다면 랜더링 속도를 향상 시켰습니다.

- app/Directory(Beta)
  - Layouts
  - React Server Components
  - Streaming

12버젼에서는 pages 폴더를 사용하였지만 13버전에서는 app 폴더를 사용합니다.

#### Layouts

next.config.js 에 experimental: { appDir: true }를 추가하여 줍니다.

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  experimental: { appDir: true }, // 추가
};

module.exports = nextConfig;
```

루트에서 pages 폴더를 지운 뒤 app 폴더를 추가하여 layout.tsx와 page.tsx 파일들를 추가하였습니다.

page.tsx를 추가해야지만 layout.tsx를 정의할 수 있습니다.

레이아웃은 여러 페이지의 UI를 공유합니다.

layout 을 통해 공통 요소, 테스트 및 스타일 경로를 배치할 수 있습니다.

- app/layout.tsx

```tsx
import { ReactNode } from 'react';

const RootLayout = ({ children }: { children: ReactNode }) => {
  return (
    <html>
      <head>
        <title>Create Next.js 13 APP</title>
        <meta name='description' content='Generated by create next 13 app' />
        <link rel='icon' href='/favicon.ico' />
      </head>
      <body>
        <header>Header</header>
        <section>{children}</section>
        <footer>Footer</footer>
      </body>
    </html>
  );
};

export default RootLayout;
```

- app/page.tsx

```tsx
const Page = () => {
  return <div>Hello Next.js 13!</div>;
};

export default Page;
```

#### React Server Components

서버 컴포넌트를 사용 하여 클라이언트에 전송되는 JavaScript의 양을 줄이면서 더 빠른 초기 페이지 로드를 가능하게 합니다.<br/>
복잡한 인터페이스를 구축할 수 있는 기반을 제공합니다.

경로가 로드되면 Next.js 와 React 런타임이 로드 됩니다. 이는 캐시 가능 하고 크기를 예측 할 수 있습니다.
런타임이 비동기식으로 로드되므로 서버의 HTML이 클라이언트에서는 점진적으로 향상 될 수 있습니다.

#### Streaming

UI의 렌더링된 단위를 점진적으로 렌더링하고 점진적으로 클라이언트에 스트리밍하는 기능을 도입했습니다.

Next.js의 서버 구성 요소 및 중첩 레이아웃 을 사용하면 특별히 데이터가 필요하지 않은 페이지 부분을 즉시 렌더링하고 데이터 를 가져오는 페이지 부분에 대한 로드 상태 를 표시할 수 있습니다. 이 접근 방식을 사용하면 사용자가 전체 페이지와 상호 작용하기 전에 전체 페이지가 로드될 때까지 기다릴 필요가 없습니다.
