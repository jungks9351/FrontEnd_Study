## 변수의 생명 주기

변수는 선언에 의해 생성되고 할당을 통해 값을 갖습니다.

변수는 생성되고 소멸되는 생명주기가 있는데 변수에 생명 주기가 없다면 한번 선언된 변수는 프로그램을 종료하지 않는 한 영원히 메모리공간을 점유하게 됩니다.

변수는 자신이 등록된 스코프가 소멸될 때 까지 유효합니다. 할당 된 메모리 공간은 그 누구도 참조하지 않았을 때 가비지 콜렉터에 의해 해제되어 가용 메모리 풀에 반환됩니다.

함수 내부에서 선언된 지역 변수의 생명 주기는 함수가 호출되면 생성되고 함수가 종료하면 소멸합니다.

전역 변수의 생명 주기는 애플리케이션의 생명 주기와 같습니다.

### 지역 변수의 생명 주기

함수가 호출된 직후에 함수 몸체의 코드가 한 줄 씩 순차적으로 실행되기 이전에 자바스크립트 엔진에 의해 먼저 실행됩니다.

```js
const func = () => {
  // 지역 변수 x 생성
  const x = 'local'; // 변수 x 값 할당
  console.log(x); // local
  return x;
  // 지역 변수 x 소멸
};

func();
console.log(x); // ReferenceError: x is not defined
```

함수 내부에서 선언된 변수는 함수가 생성한 스코프에 등록됩니다.

일반적으로 함수가 종료하면 생성한 스코프도 소멸됩니다.

누군가가 참조하고 있다면 스코프는 해제하지 않고 생존하게 됩니다.

### 전역 변수의 생명 주기

함수와 달리 전역 코드는 명시적인 호출 없이 실행됩니다.

변수 키워드로 선언한 전역 변수는 전역 객체의 프로퍼티가 됩니다.

브라우저의 전연 객체는 window 이므로 window의 프로퍼티가 되는 것입니다.

**전역 변수의 생명 주기가 전역 객체의 생명 주기와 일치하게 된다.**

```js
// 전역 변수 x 생성
const x = 'global';

const func = () => {
  // 지역 변수 x 생성
  const x = 'local'; // 변수 x 값 할당
  console.log(x); // local
  return x;
  // 지역 변수 x 소멸
};

func();
console.log(x); // global
// 프로그램 종료시 전역 변수 x 소멸
```

## 정리

지역 변수는 함수가 선언될 때 생성된후 종료가 될 때 소멸 된다.
렉시컬 환경을 가져 다른 스코프에서 참조를 하고 있다면 스코프가 해제되지 않고 생존해 있다.

전역 변수는 전역에서 생성 되어 프로그램이 종료될 때 소멸한다.
전역 변수는 전역객체(window)의 프로퍼티가 되어 전역객체의 생명 주기와 같다.

## 참고

- 모던 자바스크립트 Deep Dive - 이웅모
